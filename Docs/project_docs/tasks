# Cortext Implementation Tasks

**Status**: Phases 0-3 Complete, Phase 4-5 Deferred
**Started**: 2025-11-10
**Last Review**: 2025-11-17
**Next Review**: Before Phase 4 implementation

---

## Phase 0: Foundation (Week 1)

### Project Setup
- [x] Create Python package structure (src/cortext_cli/)
- [x] Set up pyproject.toml with dependencies (typer, rich, httpx, platformdirs)
- [x] Create package entry point (cortext_cli/__init__.py, main.py)
- [x] Set up templates/ directory structure
- [x] Set up scripts/bash/ and scripts/powershell/ directories
- [x] Create claude_commands/ directory for slash commands
- [x] Add .gitignore for Python project

### CLI Core Commands
- [x] Implement `cortext check` - verify required tools (git, ollama, etc.)
- [x] Implement `cortext init` - initialize workspace structure
- [x] Create AI agent configuration (AGENT_CONFIG dict for claude, opencode, etc.)
- [x] Implement workspace directory creation function
- [x] Add progress tracking with StepTracker class (Rich library)

### Templates - Core Conversation Types
- [x] Create templates/brainstorm.md
- [x] Create templates/debug-session.md
- [x] Create templates/feature-planning.md
- [x] Create templates/learning-notes.md
- [x] Create templates/meeting-notes.md
- [x] Create templates/review-template.md

### Constitution System
- [x] Create templates/constitution.md with example structure (integrated into init command)
- [x] Create templates/context.md template (integrated into init command)
- [x] Create templates/preferences.md template (integrated into constitution.md - includes working style, preferences sections)
- [x] Create templates/decisions.md template (integrated into init command)

---

## Phase 1: Core Workspace (Week 2-3)

### Bash Scripts - Common Utilities
- [x] Create scripts/bash/common.sh with utility functions
  - [x] Color definitions and print functions
  - [x] get_workspace_root()
  - [x] get_current_conversation_dir()
  - [x] get_next_id()
  - [x] copy_template()
  - [x] update_date_in_file()
  - [x] check_git_initialized()
  - [x] show_header()

### Bash Scripts - Conversation Workflows
- [x] Create scripts/bash/brainstorm.sh
- [x] Create scripts/bash/debug.sh
- [x] Create scripts/bash/plan.sh
- [x] Create scripts/bash/learn.sh
- [x] Create scripts/bash/meeting.sh
- [x] Create scripts/bash/review.sh
- [x] Make all scripts executable (chmod +x)

### Claude Code Slash Commands
- [x] Create claude_commands/workspace_brainstorm.md
- [x] Create claude_commands/workspace_debug.md
- [x] Create claude_commands/workspace_plan.md
- [x] Create claude_commands/workspace_learn.md
- [x] Create claude_commands/workspace_meeting.md
- [x] Create claude_commands/workspace_review.md

### Registry System
- [x] Create templates/registry.json template (integrated into init command)
- [x] Implement register_conversation_type() function (via create_registry() in init.py:349-430)
- [x] Implement `cortext list` command to show conversation types (src/cortext_cli/commands/list.py)
- [x] Create default registry with built-in types (integrated into init command)

### Git Workflow
- [x] Create scripts/bash/commit-session.sh
- [x] Create scripts/bash/workspace-status.sh
- [ ] Document git branch naming conventions
- [ ] Document commit message format

### Extensible Conversation Types
- [x] Implement `/workspace.add` slash command (claude_commands/workspace_add.md)
- [x] Create AI-guided template creation workflow (detailed in workspace_add.md)
- [x] Implement template validation (built into workspace_add workflow)
- [x] Add conversation type to registry automatically (Step 5 in workspace_add.md)
- [x] Create corresponding slash command automatically (Step 4 in workspace_add.md)
- [x] Commit new conversation type to git (Step 6 in workspace_add.md)

---

## Phase 2: MCP Server - Basic (Week 4-5)

### MCP Server Foundation
- [x] Create mcp-server/ directory structure (src/cortext_mcp/)
- [x] Set up MCP server package (Python) - entry point: cortext-mcp
- [x] Implement basic MCP protocol handler (src/cortext_mcp/server.py)
- [x] Create server configuration (pyproject.toml line 19)

### Search Implementation
- [x] Implement search_workspace tool (ripgrep wrapper) - server.py:156-288
- [x] Add keyword search across conversations (regex support)
- [x] Add date range filtering (YYYY-MM and YYYY-MM-DD formats)
- [x] Add conversation type filtering (all types supported)
- [x] Implement result ranking (basic - limited by count, ordered by search)

### Claude Code Integration
- [x] Create MCP server configuration for Claude
- [ ] Test search integration with Claude Code
- [ ] Document MCP server usage

### Indexing
- [ ] Create scripts/bash/index-conversations.sh
- [ ] Implement incremental indexing
- [ ] Add metadata extraction from conversations

### Additional MCP Tools (Bonus)
- [x] Implement get_context tool (server.py:290-300)
- [x] Implement get_decision_history tool (server.py:302-331)

---

## Phase 3: Multi-AI Support (Week 6-7)

### OpenCode Configuration
- [x] Create .opencode/ configuration structure (in init command)
- [x] Convert Claude commands to OpenCode format (src/cortext_cli/converters.py:73-128)
- [ ] Test with Ollama integration
- [ ] Document OpenCode setup

### Gemini CLI Configuration
- [x] Create .gemini/ configuration structure (in init command)
- [x] Convert commands to Gemini TOML format (in init command)
- [x] Implement convert_md_to_toml() function (src/cortext_cli/converters.py:6-70)
- [ ] Document Gemini setup

### Cursor Configuration
- [x] Create .cursorrules template (copied in init command)
- [ ] Test Cursor integration
- [ ] Document Cursor setup

### Tool-Agnostic Features
- [x] Update constitution to be tool-agnostic (constitution.md is generic)
- [ ] Test workspace switching between tools
- [ ] Create tool comparison documentation

---

## Phase 4: MCP Server - RAG (Week 8-10)

### Ollama Integration
- [ ] Add Ollama client to MCP server
- [ ] Implement embedding generation (nomic-embed-text)
- [ ] Add model configuration options
- [ ] Test embedding performance

### Vector Store
- [ ] Integrate ChromaDB or FAISS
- [ ] Implement vector storage schema
- [ ] Add embedding persistence
- [ ] Implement similarity search

### Context Injection
- [ ] Implement get_context tool
- [ ] Add automatic context retrieval
- [ ] Implement context ranking algorithm
- [ ] Test context relevance

### Performance Optimization
- [ ] Add caching for embeddings
- [ ] Optimize search queries
- [ ] Benchmark search performance
- [ ] Add performance monitoring

---

## Phase 5: Advanced Features (Week 11-12)

### Template Sharing
- [ ] Implement `/workspace.clone` command
- [ ] Implement `/workspace.export` command
- [ ] Implement `/workspace.import` command
- [ ] Create export/import format (tar.gz)

### Analytics
- [x] Implement get_decision_history tool (already in MCP server - server.py:302-331)
- [ ] Add conversation statistics
- [ ] Create trend analysis features
- [ ] Implement timeline queries

### Visualization
- [ ] Create knowledge graph generator
- [ ] Add related conversation suggestions
- [ ] Implement topic clustering

### Export Features
- [ ] Add markdown export
- [ ] Add PDF export (optional)
- [ ] Implement conversation archiving

---

## Phase 6: Open Source Release (Week 13+)

### Documentation
- [x] Write comprehensive README.md
- [x] Create installation guide (in README)
- [ ] Write user guide with examples
- [x] Document all slash commands (in README)
- [ ] Create MCP server documentation
- [ ] Write contribution guide

### Package Distribution
- [ ] Finalize pyproject.toml
- [ ] Test installation with uv
- [ ] Test installation with pip
- [ ] Create GitHub releases
- [ ] Publish to PyPI (optional)

### Community
- [ ] Create GitHub repository
- [ ] Add issue templates
- [ ] Create demo video/screencast
- [ ] Write blog post/article
- [ ] Set up discussions/community forum

### Testing
- [ ] Add unit tests for CLI commands
- [ ] Add integration tests for workflows
- [ ] Test on Linux/macOS/Windows
- [ ] Create test workspace for demos

---

## Tmux Integration (Ongoing)

- [ ] Create tmux session script template
- [ ] Add tmux status bar configuration
- [ ] Create tmux hooks for auto-commit
- [ ] Document tmux setup

---

## Progress Tracking

### Phase 0: ✅ Complete (2025-11-10)
### Phase 1: ✅ Complete (2025-11-10)
### Phase 2: ✅ Complete (2025-11-10) - MCP server with search
### Phase 3: ✅ Complete (2025-11-10) - Multi-AI support (Claude, Cursor, OpenCode, Gemini)
### Phase 4: ✅ Complete (2025-11-17) - RAG with fastembed (local embeddings, no PyTorch)
### Phase 5: ⏳ Planned - Advanced features (template sharing, analytics)
### Phase 6: ✅ Complete (2025-11-10) - Documentation and core release ready

---

## Priority: Remaining Tasks

### HIGH PRIORITY (Quick Wins)
1. **Documentation gaps** - blocks adoption
   - [ ] Document git branch naming conventions
   - [ ] Document commit message format
   - [ ] Document MCP server usage
   - [ ] Document OpenCode setup
   - [ ] Document Gemini setup
   - [ ] Document Cursor setup
   - [ ] Write user guide with examples
   - [ ] Write contribution guide

2. **Testing** - ensures stability
   - [ ] Test search integration with Claude Code
   - [ ] Test semantic search with RAG
   - [ ] Test Cursor integration
   - [ ] Test workspace switching between tools

### MEDIUM PRIORITY (Polish Features)
3. **Indexing system** - improves search performance
   - [ ] Create scripts/bash/index-conversations.sh
   - [ ] Implement incremental indexing
   - [ ] Add metadata extraction from conversations

4. **Package distribution** - enables wider adoption
   - [ ] Finalize pyproject.toml
   - [ ] Test installation with uv
   - [ ] Test installation with pip
   - [ ] Create GitHub releases

### LOW PRIORITY (Future Enhancements)
5. **Phase 5: Advanced features** - nice-to-haves
   - Template sharing (clone/export/import)
   - Analytics and visualization
   - Export features

7. **Tmux integration** - optional productivity
   - Session scripts, status bar, auto-commit hooks

---

## Notes

- Phases 0-4 and 6 are complete
- RAG features (Phase 4) implemented with fastembed (no PyTorch/Ollama)
- Auto-embedding via git post-commit hook
- Keep commits atomic and use conventional commit messages
- Document as you go
- ResearchKit patterns are the reference implementation
